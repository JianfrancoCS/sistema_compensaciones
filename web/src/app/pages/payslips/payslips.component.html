<div class="p-4">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="text-xl font-semibold text-gray-600">Boletas de Pago</h1>
      <p class="text-sm text-gray-500 mt-1">Consulta tus boletas de pago</p>
    </div>
  </div>

  <!-- Filters -->
  <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 shadow-sm border border-gray-100 mb-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="periodFrom" class="block text-sm font-medium text-gray-700 mb-2">
          Período Desde
        </label>
        <p-datepicker
          inputId="periodFrom"
          [(ngModel)]="periodFrom"
          (onClose)="onFilterChange()"
          dateFormat="dd/mm/yy"
          [showIcon]="true"
          [showClear]="true"
          placeholder="Desde"
          [fluid]="true"
          appendTo="body">
        </p-datepicker>
      </div>

      <div>
        <label for="periodTo" class="block text-sm font-medium text-gray-700 mb-2">
          Período Hasta
        </label>
        <p-datepicker
          inputId="periodTo"
          [(ngModel)]="periodTo"
          (onClose)="onFilterChange()"
          dateFormat="dd/mm/yy"
          [showIcon]="true"
          [showClear]="true"
          placeholder="Hasta"
          [fluid]="true"
          appendTo="body">
        </p-datepicker>
      </div>
    </div>

    <div class="mt-4 flex justify-end">
      <button
        pButton
        label="Limpiar Filtros"
        icon="pi pi-filter-slash"
        class="p-button-outlined"
        (click)="clearFilters()">
      </button>
    </div>
  </div>

  <!-- Empty State -->
  @if (isEmpty()) {
    <div class="bg-white/50 backdrop-blur-sm rounded-lg p-12 shadow-sm border border-gray-100 text-center">
      <i class="pi pi-file-pdf text-6xl text-gray-300 mb-4"></i>
      <p class="text-gray-500 text-lg">No hay boletas para mostrar</p>
      <p class="text-gray-400 text-sm mt-2">No se encontraron boletas con los filtros seleccionados</p>
    </div>
  }

  <!-- Table -->
  @if (!loading() && !isEmpty()) {
    <div class="bg-white/50 backdrop-blur-sm rounded-lg shadow-sm border border-gray-100">
      <p-table
        [value]="payslips()"
        [lazy]="true"
        [loading]="loading()"
        (onLazyLoad)="loadPayslips($event)"
        [totalRecords]="totalRecords()"
        [rows]="store.filters().pageSize"
        [paginator]="true"
        [rowsPerPageOptions]="[10, 20, 50, 100]"
        styleClass="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th>Período</th>
            <th>Empleado</th>
            <th>Sucursal</th>
            <th>Ingresos</th>
            <th>Descuentos</th>
            <th>Neto a Pagar</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-payslip>
          <tr>
            <td>
              <span class="font-medium">{{ payslip.periodName }}</span>
              <br>
              <span class="text-xs text-gray-500">
                {{ payslip.periodStart | date:'dd/MM/yyyy' }} - {{ payslip.periodEnd | date:'dd/MM/yyyy' }}
              </span>
            </td>
            <td>
              <span class="font-medium">{{ payslip.employeeFullName }}</span>
              <br>
              <span class="text-xs text-gray-500">{{ payslip.employeeDocumentNumber }}</span>
            </td>
            <td>{{ payslip.subsidiaryName }}</td>
            <td>{{ payslip.totalIncome | currency:'PEN':'symbol':'1.2-2' }}</td>
            <td>{{ payslip.totalDeductions | currency:'PEN':'symbol':'1.2-2' }}</td>
            <td>
              <span class="font-semibold text-green-600">
                {{ payslip.netToPay | currency:'PEN':'symbol':'1.2-2' }}
              </span>
            </td>
            <td>
              <span class="text-sm">{{ payslip.createdAt | date:'dd/MM/yyyy' }}</span>
            </td>
            <td>
              <button
                pButton
                label="Ver"
                icon="pi pi-eye"
                class="p-button-sm p-button-text"
                (click)="viewPayslip(payslip)">
              </button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  }
</div>


<app-modal-template
  [visible]="visible"
  headerText="Asignar Perfil a Usuario"
  [width]="'min(500px, 90vw)'"
  (onHide)="hideModal()"
  (onSubmit)="saveProfile()"
  [isSubmitDisabled]="profileForm.invalid || userStore.loading()"
>
  <form [formGroup]="profileForm">
    <div class="flex flex-col gap-4 p-6">
      <div class="space-y-2">
        <p class="text-sm text-gray-600">
          Usuario: <span class="font-semibold">{{ username }}</span>
        </p>
      </div>

      <div class="space-y-2">
        <label for="profileId" class="flex items-center gap-2 font-semibold text-sm text-gray-700">
          <i class="pi pi-id-card text-gray-500"></i>
          Perfil
          <span class="text-red-500">*</span>
        </label>
        <p-select
          inputId="profileId"
          formControlName="profileId"
          [options]="profileOptions()"
          optionLabel="label"
          optionValue="value"
          placeholder="Seleccione un perfil"
          [showClear]="true"
          class="w-full">
        </p-select>
        @if (profileForm.get('profileId')?.invalid && profileForm.get('profileId')?.touched) {
          <small class="text-red-500 flex items-center gap-1">
            <i class="pi pi-exclamation-circle text-xs"></i>
            Debe seleccionar un perfil
          </small>
        }
      </div>
    </div>
  </form>
</app-modal-template>

